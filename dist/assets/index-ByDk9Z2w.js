import{j as e,r as t,a as l2}from"./react-BBe98dR_.js";import{c as H2}from"./react-dom-BGR8z3l7.js";import{t as k2,v as B2,w as R2}from"./@ant-design-BZVivk6X.js";import{B as R,D as M2,S as i2,T as P2,L as Q,C as Z2,a as F2,A as I2,b as o2,s as s2,c as L2,d as D2,e as C2,M as T2}from"./antd-D8AoFk_r.js";import{u as x2,a as j2,O as G2,C as Y2}from"./@react-three-CmBtav09.js";import{g as J,ah as z2,e as $,h as A2,a5 as X2,a6 as f2,a7 as b2,ay as $2}from"./three-ZR8ZVFar.js";import{G as W2,a as N2}from"./three-stdlib-CIGbkBGA.js";import{u as O2,L as m2,R as U2,a as g2,B as _2}from"./react-router-YdZ6PhaB.js";import"./scheduler-SPyfQU6S.js";import"./rc-util-B7VB0ZIB.js";import"./@babel-CTxA0vis.js";import"./react-is-BpBQ4hf7.js";import"./@emotion-CW87jbl0.js";import"./stylis-D5iaQeiq.js";import"./classnames-BdLTK52K.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./rc-picker-CBTFLAK1.js";import"./rc-resize-observer-C178JbiP.js";import"./rc-motion-V2HYxALa.js";import"./rc-overflow-DtyfpZeo.js";import"./@rc-component-CM3N6D1J.js";import"./rc-tooltip-BwkNI7pa.js";import"./rc-menu-CSLw0eOI.js";import"./rc-input-number-BFQqaPf6.js";import"./rc-input-VqIJCChj.js";import"./rc-dropdown-tamBjOvr.js";import"./rc-field-form-B4xNs2Da.js";import"./throttle-debounce-CUWDS_la.js";import"./rc-notification-59ZqaOLg.js";import"./react-use-measure-S6dSgc-c.js";import"./its-fine-CRoP7nir.js";import"./react-reconciler-DzZYc9Rn.js";import"./zustand-CByO6g26.js";import"./use-sync-external-store-DS2C3nZt.js";import"./cookie--_YQFYBD.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(o){if(o.ep)return;o.ep=!0;const u=s(o);fetch(o.href,u)}})();const q2="data:image/svg+xml,%3csvg%20width='52'%20height='48'%20viewBox='0%200%2052%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M21.5%2015H24.5V18H21.5V15ZM27.5%2015H30.5V18H27.5V15ZM21.5%2022.5H24.5V25.5H21.5V22.5ZM27.5%2022.5H30.5V25.5H27.5V22.5ZM21.5%2030H24.5V33H21.5V30ZM27.5%2030H30.5V33H27.5V30Z'%20fill='white'/%3e%3c/svg%3e",K2=()=>e.jsx(R,{type:"text",icon:e.jsx("img",{src:q2,alt:"Drag Dot"}),className:"menu-button"}),J2="data:image/svg+xml,%3csvg%20width='52'%20height='48'%20viewBox='0%200%2052%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.5%2016C11.5%2014.8954%2012.3954%2014%2013.5%2014H24.4142L28.5%2018.0858V32C28.5%2033.1046%2027.6046%2034%2026.5%2034H13.5C12.3954%2034%2011.5%2033.1046%2011.5%2032V16ZM23.5858%2016L13.5%2016V32H26.5V18.9142L23.5858%2016ZM24%2023.5H16V21.5H24V23.5ZM21%2027.5H16V25.5H21V27.5Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M37.1643%2023.1426L37.6357%2022.6712L39.9927%2025.0282L42.3498%2022.6712L42.8212%2023.1426L40.2285%2025.7353C40.2284%2025.7353%2040.2284%2025.7353%2039.9927%2025.4996L40.2285%2025.7353L39.9927%2025.971L37.1643%2023.1426Z'%20fill='white'/%3e%3c/svg%3e",Q2=()=>e.jsx(R,{type:"text",icon:e.jsx("img",{src:J2,alt:"File Selector"}),className:"menu-button"}),e0="data:image/svg+xml,%3csvg%20width='52'%20height='48'%20viewBox='0%200%2052%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M17%2019.5C17%2017.8431%2018.3431%2016.5%2020%2016.5C21.6569%2016.5%2023%2017.8431%2023%2019.5C23%2021.1569%2021.6569%2022.5%2020%2022.5C18.3431%2022.5%2017%2021.1569%2017%2019.5ZM20%2014.5C17.2386%2014.5%2015%2016.7386%2015%2019.5C15%2022.2614%2017.2386%2024.5%2020%2024.5C22.7614%2024.5%2025%2022.2614%2025%2019.5C25%2016.7386%2022.7614%2014.5%2020%2014.5ZM16%2025.5C14.5608%2025.5%2013.1952%2025.9386%2012.1719%2026.8048C11.1328%2027.6844%2010.5%2028.9637%2010.5%2030.5V32C10.5%2032.8284%2011.1716%2033.5%2012%2033.5H28C28.8284%2033.5%2029.5%2032.8284%2029.5%2032V30.5C29.5%2028.9637%2028.8672%2027.6844%2027.8281%2026.8048C26.8048%2025.9386%2025.4392%2025.5%2024%2025.5H16ZM12.5%2030.5C12.5%2029.551%2012.8746%2028.8303%2013.4641%2028.3313C14.0695%2027.8188%2014.9539%2027.5%2016%2027.5H24C25.0461%2027.5%2025.9305%2027.8188%2026.5359%2028.3313C27.1254%2028.8303%2027.5%2029.551%2027.5%2030.5V31.5H12.5V30.5Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M37.1643%2023.1426L37.6357%2022.6712L39.9927%2025.0282L42.3498%2022.6712L42.8212%2023.1426L40.2285%2025.7353C40.2284%2025.7353%2040.2284%2025.7353%2039.9927%2025.4996L40.2285%2025.7353L39.9927%2025.971L37.1643%2023.1426Z'%20fill='white'/%3e%3c/svg%3e",t0=()=>e.jsx(R,{type:"text",icon:e.jsx("img",{src:e0,alt:"Avatar"}),className:"menu-button"}),r0="data:image/svg+xml,%3csvg%20width='52'%20height='48'%20viewBox='0%200%2052%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10%2015.5C10%2014.6716%2010.6716%2014%2011.5%2014H17.3874L17.6812%2014.2988C18.2554%2014.8827%2019.1347%2015.5294%2020%2015.5294C20.8653%2015.5294%2021.7446%2014.8827%2022.3188%2014.2988L22.6126%2014H28.5C29.3284%2014%2030%2014.6716%2030%2015.5V24.2794C30%2025.1078%2029.3284%2025.7794%2028.5%2025.7794H27.5V32C27.5%2032.8284%2026.8284%2033.5%2026%2033.5H14C13.1716%2033.5%2012.5%2032.8284%2012.5%2032V25.7794H11.5C10.6716%2025.7794%2010%2025.1078%2010%2024.2794V15.5ZM12%2016V23.7794H14.5V31.5H25.5V23.7794H28V16H23.4343C22.7141%2016.6561%2021.4838%2017.5294%2020%2017.5294C18.5162%2017.5294%2017.2859%2016.6561%2016.5657%2016H12Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M37.1643%2023.1426L37.6357%2022.6712L39.9927%2025.0282L42.3498%2022.6712L42.8212%2023.1426L40.2285%2025.7353C40.2284%2025.7353%2040.2284%2025.7353%2039.9927%2025.4996L40.2285%2025.7353L39.9927%2025.971L37.1643%2023.1426Z'%20fill='white'/%3e%3c/svg%3e",n0=({onClick:r,onExportPatternSVG:n})=>{const s=({key:o})=>{o==="import-clo3d"&&r&&r(),o==="export-2d"&&n&&n()},l=[{key:"import-group",label:"Import",type:"group",children:[{key:"import-2d",label:"2D Pattern",disabled:!0},{key:"import-clo3d",label:"3D Cloth"}]},{type:"divider"},{key:"construction-group",label:"Construction",type:"group",children:[{key:"construction-mesh",label:"Mesh",disabled:!0},{key:"construction-pointcloud",label:"Point Cloud",disabled:!0},{key:"construction-images",label:"Images",disabled:!0}]},{type:"divider"},{key:"export-group",label:"Export",type:"group",children:[{key:"export-2d",label:"2D Pattern"},{key:"export-clo3d",label:"CLO 3D Cloth",disabled:!0},{key:"export-mesh",label:"Mesh",disabled:!0}]}];return e.jsx(M2,{menu:{items:l,onClick:s},trigger:["click"],placement:"bottomLeft",arrow:!0,children:e.jsx("a",{onClick:o=>o.preventDefault(),children:e.jsx(R,{type:"text",icon:e.jsx("img",{src:r0,alt:"Cloth Selector"}),className:"menu-button"})})})},o0="data:image/svg+xml,%3csvg%20width='52'%20height='48'%20viewBox='0%200%2052%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10%2014.5H14V18.5H10V14.5ZM18%2018.5V22.5H14V18.5H18ZM14%2026.5H10V22.5H14V26.5ZM18%2026.5H14V30H10V34H14V30.5H18V34H22V30.5H26V34H30V30H26V26.5H30V22.5H26V18.5H30V14.5H26V18.5H22V14.5H18V18.5H22V22.5H18V26.5ZM22%2026.5H18V30H22V26.5ZM22%2022.5V26.5H26V22.5H22Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M37.1643%2023.1426L37.6357%2022.6712L39.9927%2025.0282L42.3498%2022.6712L42.8212%2023.1426L40.2285%2025.7353C40.2284%2025.7353%2040.2284%2025.7353%2039.9927%2025.4996L40.2285%2025.7353L39.9927%2025.971L37.1643%2023.1426Z'%20fill='white'/%3e%3c/svg%3e",s0=()=>e.jsx(R,{type:"text",icon:e.jsx("img",{src:o0,alt:"Texture"}),className:"menu-button"}),l0="data:image/svg+xml,%3csvg%20width='52'%20height='48'%20viewBox='0%200%2052%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M24.6569%2013.8936L29.6067%2018.8433L15.5252%2032.9248H10.5754V27.975L24.6569%2013.8936ZM12.5754%2028.8035V30.9248H14.6968L24.3034%2021.3182L22.182%2019.1969L12.5754%2028.8035ZM23.5963%2017.7826L25.7176%2019.904L26.7782%2018.8433L24.6569%2016.722L23.5963%2017.7826Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M37.1643%2023.1426L37.6357%2022.6712L39.9927%2025.0282L42.3498%2022.6712L42.8212%2023.1426L40.2285%2025.7353C40.2284%2025.7353%2040.2284%2025.7353%2039.9927%2025.4996L40.2285%2025.7353L39.9927%2025.971L37.1643%2023.1426Z'%20fill='white'/%3e%3c/svg%3e",i0=[{key:"View_Tool",label:"View Tools",type:"group",children:[{key:"Move",label:"Move"}]},{type:"divider"},{key:"Vector_Tool",label:"Vector Tools",type:"group",children:[{key:"Bezel_Pen",label:"Bezel Pen",disabled:"true"},{key:"Pencil",label:"Pencil",disabled:"true"}]},{type:"divider"},{key:"Brush_Tool",label:"Brush Tools",type:"group",children:[{key:"Region_Brush",label:"Region Brush"},{key:"Region_Eraser",label:"Region Eraser"}]}],c0=({onToolSelect:r})=>{const[n,s]=t.useState("Move"),l=({key:o})=>{s(o),r&&r(o)};return e.jsx(M2,{menu:{items:i0,selectable:!0,defaultSelectedKeys:["Move"],onClick:l},placement:"bottomLeft",arrow:!0,trigger:["click"],children:e.jsx(R,{type:"text",icon:e.jsx("img",{src:l0,alt:"Pen"}),className:"menu-button"})})},a0="data:image/svg+xml,%3csvg%20width='52'%20height='48'%20viewBox='0%200%2052%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.4141%2025.4349L20.9352%2015.9139L26.8278%2017.0924L28.0063%2022.985L18.4852%2032.506L11.4141%2025.4349ZM21.065%2013.9002C20.5732%2013.8019%2020.0648%2013.9558%2019.7102%2014.3105L9.64637%2024.3743C9.06058%2024.9601%209.06059%2025.9098%209.64637%2026.4956L17.4245%2034.2738C18.0103%2034.8596%2018.9601%2034.8596%2019.5459%2034.2738L29.6097%2024.21C29.9643%2023.8553%2030.1183%2023.3469%2030.0199%2022.8551L28.7235%2016.3733C28.6048%2015.7795%2028.1406%2015.3154%2027.5468%2015.1966L21.065%2013.9002ZM24.2884%2020.1732C24.2884%2020.4493%2024.0645%2020.6732%2023.7884%2020.6732C23.699%2020.6732%2023.615%2020.6497%2023.5424%2020.6086C23.3919%2020.5223%2023.2906%2020.3602%2023.2906%2020.1744C23.2906%2019.8983%2023.5145%2019.6744%2023.7906%2019.6744C23.8801%2019.6744%2023.9641%2019.6979%2024.0368%2019.7391C24.1871%2019.8253%2024.2884%2019.9874%2024.2884%2020.1732ZM23.7884%2018.6732C22.96%2018.6732%2022.2884%2019.3447%2022.2884%2020.1732C22.2884%2020.7322%2022.5942%2021.2198%2023.0477%2021.4778C23.2667%2021.6029%2023.5203%2021.6744%2023.7906%2021.6744C24.619%2021.6744%2025.2906%2021.0029%2025.2906%2020.1744C25.2906%2019.615%2024.9843%2019.127%2024.5303%2018.8692C24.3115%2018.7444%2024.0583%2018.6732%2023.7884%2018.6732Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M37.1643%2023.1426L37.6357%2022.6712L39.9927%2025.0282L42.3498%2022.6712L42.8212%2023.1426L40.2285%2025.7353C40.2284%2025.7353%2040.2284%2025.7353%2039.9927%2025.4996L40.2285%2025.7353L39.9927%2025.971L37.1643%2023.1426Z'%20fill='white'/%3e%3c/svg%3e",d0=()=>e.jsx(R,{type:"text",icon:e.jsx("img",{src:a0,alt:"Label"}),className:"menu-button"}),u0="data:image/svg+xml,%3csvg%20width='52'%20height='48'%20viewBox='0%200%2052%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10.5%2024C10.5%2018.7533%2014.7533%2014.5%2020%2014.5C25.2467%2014.5%2029.5%2018.7533%2029.5%2024V24.3148C29.5%2029.3877%2025.3877%2033.5%2020.3148%2033.5H10.5V24ZM20%2016.5C15.8579%2016.5%2012.5%2019.8579%2012.5%2024V31.5H20.3148C24.2831%2031.5%2027.5%2028.2831%2027.5%2024.3148V24C27.5%2019.8579%2024.1421%2016.5%2020%2016.5ZM24.5%2021V23H15.5V21H24.5ZM20%2027.5H15.5V25.5H20V27.5Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M37.1643%2023.1426L37.6357%2022.6712L39.9927%2025.0282L42.3498%2022.6712L42.8212%2023.1426L40.2285%2025.7353C40.2284%2025.7353%2040.2284%2025.7353%2039.9927%2025.4996L40.2285%2025.7353L39.9927%2025.971L37.1643%2023.1426Z'%20fill='white'/%3e%3c/svg%3e",h0=()=>e.jsx(R,{type:"text",icon:e.jsx("img",{src:u0,alt:"Comment"}),className:"menu-button"}),C0=({onClothSelect:r,onExportPatternSVG:n,onToolSelect:s})=>e.jsxs(i2,{size:"middle",children:[e.jsx(K2,{}),e.jsx(Q2,{}),e.jsx(t0,{}),e.jsx(n0,{onClick:r,onExportPatternSVG:n}),e.jsx(s0,{}),e.jsx(c0,{onToolSelect:s}),e.jsx(d0,{}),e.jsx(h0,{})]}),f0="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='12'%20cy='12'%20r='4'%20fill='white'/%3e%3ccircle%20cx='12'%20cy='12'%20r='8'%20stroke='white'%20stroke-width='2'/%3e%3c/svg%3e",m0="data:image/svg+xml,%3csvg%20width='15'%20height='15'%20viewBox='0%200%2015%2015'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.7266%207.89011e-05C11.5333%20-0.0039211%2011.34%200.0132602%2011.1523%200.0508602C10.4016%200.201%209.70541%200.628659%209.14648%201.18758L7.00195%203.295L5.85351%202.14656C5.80688%202.09837%205.75105%202.06006%205.68931%202.03389C5.62757%202.00772%205.56119%201.99422%205.49414%201.99422C5.39455%201.99424%205.29723%202.02399%205.21466%202.07967C5.13208%202.13535%205.06803%202.21446%205.03068%202.30678C4.99333%202.3991%204.9844%202.50043%205.00503%202.59786C5.02566%202.69529%205.07491%202.78434%205.14648%202.85359L6.79296%204.50008L2.14453%209.18953C2.05195%209.28312%202.00002%209.40946%201.99999%209.54109V10.3341L0.146479%2012.1876C0.0985134%2012.2337%200.0602136%2012.2888%200.0338386%2012.3499C0.00746364%2012.4109%20-0.0064641%2012.4767%20-0.00713123%2012.5432C-0.00779836%2012.6097%200.00481803%2012.6757%200.0299629%2012.7373C0.0551077%2012.7988%200.0922758%2012.8548%200.139307%2012.9018C0.186339%2012.9488%200.242282%2012.986%200.303858%2013.0111C0.365435%2013.0363%200.431411%2013.0489%200.497919%2013.0482C0.564428%2013.0476%200.630128%2013.0336%200.691187%2013.0072C0.752246%2012.9808%200.807433%2012.9426%200.85351%2012.8946L2.85351%2010.8946C2.94728%2010.8009%202.99997%2010.6737%202.99999%2010.5411V9.74617L7.50195%205.20906L8.79492%206.50203L4.29101%2011.0411H3.49999C3.36739%2011.0411%203.24024%2011.0938%203.14648%2011.1876L1.14648%2013.1876C1.09851%2013.2337%201.06021%2013.2888%201.03384%2013.3499C1.00746%2013.4109%200.993536%2013.4767%200.992869%2013.5432C0.992202%2013.6097%201.00482%2013.6757%201.02996%2013.7373C1.05511%2013.7988%201.09228%2013.8548%201.13931%2013.9018C1.18634%2013.9488%201.24228%2013.986%201.30386%2014.0111C1.36543%2014.0363%201.43141%2014.0489%201.49792%2014.0482C1.56443%2014.0476%201.63013%2014.0336%201.69119%2014.0072C1.75225%2013.9808%201.80743%2013.9426%201.85351%2013.8946L3.70703%2012.0411H4.49999C4.56612%2012.0411%204.63158%2012.0279%204.69259%2012.0025C4.75361%2011.977%204.80897%2011.9397%204.85546%2011.8927L9.50195%207.20906L11.1465%208.85359C11.1926%208.90153%2011.2477%208.93979%2011.3088%208.96614C11.3699%208.9925%2011.4355%209.00644%2011.502%209.0071C11.5685%209.00775%2011.6345%208.99513%2011.6961%208.96999C11.7576%208.94484%2011.8135%208.90763%2011.8606%208.86061C11.9076%208.81359%2011.9447%208.75768%2011.9699%208.69612C11.995%208.63456%2012.0077%208.56859%2012.007%208.50209C12.0063%208.4356%2011.9924%208.36991%2011.9661%208.30886C11.9397%208.2478%2011.9014%208.19265%2011.8535%208.14656L10.7109%207.00398L12.8496%204.89852L12.8536%204.89455C13.4125%204.33562%2013.8402%203.63934%2013.9903%202.88863C14.1405%202.13791%2013.9714%201.30538%2013.3536%200.687518C12.8902%200.224128%2012.3064%200.0132289%2011.7266%207.89011e-05Z'%20fill='white'/%3e%3c/svg%3e",g0=({brushSize:r,setBrushSize:n,brushColor:s,setBrushColor:l,onColorPickerClick:o,onAddNewColor:u,isVertexColorModeEnabled:c})=>{const y=p=>{n(p)},h=()=>{o&&c&&o()},m=()=>{u&&u()};return e.jsxs(i2,{size:"small",style:{height:20,marginLeft:80,marginRight:16,backgroundColor:"#303030"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx("img",{src:f0,alt:"Brush Thickness",style:{width:20,height:20}})}),e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(P2,{size:"small",min:1,max:50,value:r,onChange:y,style:{width:60}})}),e.jsxs("div",{onClick:h,style:{display:"flex",flexDirection:"column",alignItems:"center",cursor:c?"pointer":"not-allowed",position:"relative",width:26,height:26,opacity:c?1:.5},children:[e.jsx("img",{src:m0,alt:"Color Picker",style:{width:14,height:14,position:"absolute",marginTop:6,zIndex:2}}),e.jsx("div",{alt:"Brush Color",style:{width:26,height:26,borderRadius:"50%",backgroundColor:s||"#000000",border:"1px solid #666",position:"absolute",top:0,left:0,zIndex:1}})]}),e.jsx(R,{type:"text",icon:e.jsx(k2,{style:{color:"#FFFFFF"}}),onClick:m,style:{color:"#FFFFFF"}})]})},{Header:p0}=Q,x0=({onImportModel:r,onClothSelect:n,onExportPatternSVG:s,brushSize:l,setBrushSize:o,brushColor:u,setBrushColor:c,onColorPickerClick:y,onAddNewColor:h,onToolSelect:m,isVertexColorModeEnabled:p})=>e.jsxs(p0,{style:{display:"flex",alignItems:"center",padding:"0 10px",height:"48px",backgroundColor:"#303030"},children:[e.jsx(C0,{onClothSelect:n,onExportPatternSVG:s,onToolSelect:m}),e.jsx(g0,{brushSize:l,setBrushSize:o,brushColor:u,setBrushColor:c,onColorPickerClick:y,onAddNewColor:h,isVertexColorModeEnabled:p}),e.jsx(Z2,{theme:{components:{Breadcrumb:{separatorColor:"rgba(191, 191, 191, 0.50)",itemColor:"rgba(191, 191, 191, 0.50)"}}},children:e.jsx("div",{style:{position:"relative",left:"200 px",paddingLeft:"20 px"},children:e.jsx(F2,{items:[{title:"Folder"},{title:e.jsx("a",{href:"",children:"Filename"})}]})})}),e.jsxs(i2,{style:{position:"absolute",right:"20px"},children:[e.jsx(I2,{style:{backgroundColor:"#87d068"},icon:e.jsx(B2,{})}),e.jsx("span",{style:{color:"#fff"},children:"User"}),e.jsx(R,{type:"primary",icon:e.jsx(R2,{}),children:"Save"})]})]});function v0({enableDamping:r=!0,dampingFactor:n=.1,zoomRate:s=.002}){const l=t.useRef(),o=x2(x=>x.camera),c=x2(x=>x.gl).domElement,y=t.useRef(!1),h=t.useRef(!1),m=t.useRef(null),p=t.useRef(null),P=t.useRef(0);t.useEffect(()=>{const x=g=>{g.shiftKey&&(y.current=!0)},L=g=>{y.current=!1};return window.addEventListener("keydown",x),window.addEventListener("keyup",L),()=>{window.removeEventListener("keydown",x),window.removeEventListener("keyup",L)}},[]),t.useEffect(()=>{const x=d=>{(d.button===2||d.buttons===2)&&(d.preventDefault(),d.stopPropagation(),h.current=!0,m.current=y.current?"pan":"rotate")},L=d=>{m.current==="rotate"?M(d):m.current==="pan"&&j(d.movementX,d.movementY)},g=d=>{(d.button===2||d.buttons===2)&&(h.current=!1,m.current=null)},v=d=>{l.current&&H(o.zoom-d.deltaY*s)},f=d=>{d.preventDefault()};return c.addEventListener("mousedown",x),c.addEventListener("mousemove",L),c.addEventListener("mouseup",g),c.addEventListener("wheel",v),c.addEventListener("contextmenu",f),()=>{c.removeEventListener("mousedown",x),c.removeEventListener("mousemove",L),c.removeEventListener("mouseup",g),c.removeEventListener("wheel",v),c.removeEventListener("contextmenu",f)}},[c]),t.useEffect(()=>{const x=v=>{if(p.current=null,P.current=0,v.touches.length===2){const f=v.touches[0].clientX-v.touches[1].clientX,d=v.touches[0].clientY-v.touches[1].clientY;P.current=Math.hypot(f,d),y.current?m.current="pan":m.current="zoom"}else v.touches.length===1&&(m.current="rotate",p.current=null)},L=v=>{if(l.current){if(v.touches.length===2){const f=v.touches[0],d=v.touches[1];if(m.current==="zoom"){const E=(f.clientY+d.clientY)/2;if(p.current){const V=E-p.current.y;H(o.zoom-V*s)}p.current={x:(f.clientX+d.clientX)/2,y:E}}else if(m.current==="pan"){const E=(f.clientX-d.clientX)*.001,V=(f.clientY-d.clientY)*.001;j(E,V)}else{const E=(f.clientX+d.clientX)/2,V=(f.clientY+d.clientY)/2;if(p.current){const D=E-p.x,C=V-p.y;M({movementX:D,movementY:C})}p.current={x:E,y:V}}}else if(v.touches.length===1){const f=v.touches[0];if(p.current){const d=f.clientX-p.x,E=f.clientY-p.y;M({movementX:d,movementY:E})}p.current={x:f.clientX,y:f.clientY}}}},g=()=>{m.current=null,p.current=null,P.current=0};return c.addEventListener("touchstart",x),c.addEventListener("touchmove",L),c.addEventListener("touchend",g),()=>{c.removeEventListener("touchstart",x),c.removeEventListener("touchmove",L),c.removeEventListener("touchend",g)}},[c]),j2(()=>{l.current&&r&&l.current.update()});const M=x=>{if(!l.current)return;const L=l.current.getAzimuthalAngle(),g=l.current.getPolarAngle(),v=.05,f=-x.movementX*v,d=-x.movementY*v;l.current.setAzimuthalAngle(L+f),l.current.setPolarAngle(g+d)},j=(x,L)=>{if(!l.current)return;const g=l.current,v=g.object,f=g.target.clone(),d=new J;v.getWorldDirection(d),d.y=0,d.normalize();const E=new J().crossVectors(v.up,d).normalize(),V=new J(0,1,0),D=.01,C=x*D,a=L*D,i=new J;i.addScaledVector(E,C),i.addScaledVector(V,a),f.add(i),g.target.copy(f)},H=x=>{if(!l.current)return;const L=z2.clamp(x,.1,10);l.current.object.zoom=L,l.current.object.updateProjectionMatrix()};return e.jsx(G2,{ref:l,makeDefault:!1,enableRotate:!1,enableZoom:!1,enablePan:!1,enableDamping:r,dampingFactor:n,minPolarAngle:0,maxPolarAngle:Math.PI})}const w0="data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M15%204.5C9.20989%204.5%204.5%209.20988%204.5%2015C4.5%2020.7901%209.20989%2025.5%2015%2025.5C20.7901%2025.5%2025.5%2020.7901%2025.5%2015C25.5%209.20988%2020.7901%204.5%2015%204.5ZM15%206C19.9794%206%2024%2010.0205%2024%2015C24%2019.9794%2019.9795%2024%2015%2024C10.0205%2024%206%2019.9794%206%2015C6%2010.0205%2010.0206%206%2015%206Z'%20fill='white'/%3e%3cpath%20opacity='0.8'%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M14.9765%204.86589C14.8673%204.87033%2014.7603%204.89858%2014.6632%204.94868C14.566%204.99878%2014.481%205.06952%2014.414%205.15593C13.3543%206.48055%2012.6602%208.15091%2012.2988%2010.4997H6.37494C5.3607%2010.4847%205.3607%2012.014%206.37494%2011.9997H12.123C12.0447%2012.9093%2012%2013.8947%2012%2014.9997C12%2016.1047%2012.0448%2017.09%2012.123%2017.9997H6.37494C5.3607%2017.9847%205.3607%2019.514%206.37494%2019.4997H12.2988C12.6603%2021.8485%2013.3544%2023.5189%2014.414%2024.8434C14.5386%2024.9979%2014.7194%2025.0968%2014.9167%2025.1183C15.114%2025.1398%2015.3119%2025.0823%2015.4669%2024.9583C15.6219%2024.8343%2015.7214%2024.6539%2015.7437%2024.4567C15.766%2024.2595%2015.7093%2024.0614%2015.5859%2023.9059C14.7375%2022.8455%2014.14%2021.5111%2013.8076%2019.4997H23.6249C24.6392%2019.5147%2024.6392%2017.9853%2023.6249%2017.9997H13.623C13.5441%2017.1139%2013.5%2016.1284%2013.5%2014.9997C13.5%2013.8709%2013.5441%2012.8855%2013.623%2011.9997H23.6249C24.6392%2012.0147%2024.6392%2010.4853%2023.6249%2010.4997H13.8076C14.14%208.48824%2014.7376%207.15375%2015.5859%206.09343C15.6783%205.9817%2015.7364%205.84558%2015.7531%205.70153C15.7697%205.55748%2015.7442%205.41168%2015.6798%205.28179C15.6153%205.15191%2015.5145%205.04349%2015.3897%204.96968C15.2649%204.89587%2015.1214%204.85982%2014.9765%204.86589Z'%20fill='white'/%3e%3c/svg%3e",y0=({onClick:r,isActive:n})=>e.jsx(R,{type:"text",icon:e.jsx("img",{src:w0,alt:"Wireframe Mode"}),className:`wireframe-button ${n?"active":""}`,onClick:r,title:"Wireframe Mode"}),L0="data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M24.7559%2015C24.7559%2016.2811%2024.5035%2017.5498%2024.0132%2018.7334C23.523%2019.917%2022.8044%2020.9925%2021.8984%2021.8984C20.9925%2022.8043%2019.917%2023.523%2018.7334%2024.0132C17.5498%2024.5035%2016.2812%2024.7558%2015%2024.7558C13.7188%2024.7558%2012.4502%2024.5035%2011.2666%2024.0132C10.083%2023.523%209.00748%2022.8043%208.10156%2021.8984C7.19565%2020.9925%206.47704%2019.917%205.98676%2018.7334C5.49648%2017.5498%205.24414%2016.2811%205.24414%2015C5.24414%2012.4126%206.27199%209.93114%208.10157%208.10156C9.93115%206.27198%2012.4126%205.24414%2015%205.24414C17.5874%205.24414%2020.0689%206.27198%2021.8984%208.10156C23.728%209.93114%2024.7559%2012.4126%2024.7559%2015Z'%20fill='white'/%3e%3cpath%20opacity='0.6'%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M24.7559%2015C24.7559%2020.388%2020.388%2024.7558%2015%2024.7558C9.61198%2024.7558%205.24414%2020.388%205.24414%2015C5.24414%209.61197%209.61198%205.24414%2015%205.24414C20.388%205.24414%2024.7559%209.61197%2024.7559%2015Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M15%204.49414C9.20666%204.49414%204.49415%209.20666%204.49414%2015C4.49414%2020.7933%209.20665%2025.5059%2015%2025.5059C20.7933%2025.5059%2025.5059%2020.7933%2025.5059%2015C25.5058%209.20666%2020.7933%204.49414%2015%204.49414ZM15%205.99414C19.9827%205.99414%2024.0058%2010.0173%2024.0059%2015C24.0059%2019.9827%2019.9827%2024.0059%2015%2024.0059C10.0173%2024.0059%205.99414%2019.9827%205.99414%2015C5.99415%2010.0173%2010.0173%205.99414%2015%205.99414Z'%20fill='white'/%3e%3c/svg%3e",b0=({onClick:r,isActive:n})=>e.jsx(R,{type:"text",icon:e.jsx("img",{src:L0,alt:"White Model Mode"}),className:`white-model-button ${n?"active":""}`,onClick:r,title:"White Model Mode"}),M0="data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15%205.25C9.61521%205.25%205.25%208.86521%205.25%2014.25C6.75%2015.75%209.75%2018%2015%2018V5.25Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M15%204.5C9.2099%204.5%204.5%209.20989%204.5%2015C4.5%2020.7901%209.20988%2025.5%2015%2025.5C20.7901%2025.5%2025.5%2020.7901%2025.5%2015C25.5%209.20989%2020.7901%204.5%2015%204.5ZM15%206C19.9794%206%2024%2010.0205%2024%2015C24%2019.9795%2019.9795%2024%2015%2024C10.0205%2024%206%2019.9795%206%2015C6%2010.0205%2010.0206%206%2015%206Z'%20fill='white'/%3e%3cpath%20d='M22.8663%2015.9668C22.6876%2015.9672%2022.513%2016.0208%2022.3648%2016.1208C22.2167%2016.2208%2022.1016%2016.3626%2022.0344%2016.5282C21.9671%2016.6938%2021.9507%2016.8757%2021.9872%2017.0507C22.0237%2017.2257%2022.1115%2017.3858%2022.2394%2017.5107L22.9894%2018.2607C23.0713%2018.3508%2023.1707%2018.4234%2023.2815%2018.474C23.3923%2018.5245%2023.5122%2018.5521%2023.6339%2018.555C23.7557%2018.5579%2023.8768%2018.536%2023.9898%2018.4908C24.1029%2018.4455%2024.2056%2018.3777%2024.2917%2018.2916C24.3779%2018.2055%2024.4456%2018.1028%2024.4909%2017.9897C24.5362%2017.8767%2024.558%2017.7556%2024.5551%2017.6338C24.5522%2017.5121%2024.5247%2017.3922%2024.4741%2017.2814C24.4235%2017.1706%2024.351%2017.0712%2024.2609%2016.9893L23.5109%2016.2393C23.4271%2016.1531%2023.3269%2016.0846%2023.2162%2016.0378C23.1055%2015.991%2022.9865%2015.9669%2022.8663%2015.9668ZM19.4913%2017.0918C19.3126%2017.0922%2019.138%2017.1458%2018.9898%2017.2458C18.8417%2017.3458%2018.7266%2017.4876%2018.6594%2017.6532C18.5921%2017.8188%2018.5757%2018.0007%2018.6122%2018.1757C18.6487%2018.3507%2018.7365%2018.5108%2018.8644%2018.6357L21.4894%2021.2607C21.5713%2021.3508%2021.6707%2021.4234%2021.7815%2021.474C21.8923%2021.5245%2022.0122%2021.5521%2022.1339%2021.555C22.2557%2021.5579%2022.3768%2021.536%2022.4898%2021.4908C22.6029%2021.4455%2022.7056%2021.3777%2022.7917%2021.2916C22.8779%2021.2055%2022.9456%2021.1028%2022.9909%2020.9897C23.0362%2020.8767%2023.058%2020.7556%2023.0551%2020.6338C23.0522%2020.5121%2023.0247%2020.3922%2022.9741%2020.2814C22.9235%2020.1706%2022.851%2020.0712%2022.7609%2019.9893L20.1359%2017.3643C20.0521%2017.2781%2019.9519%2017.2096%2019.8412%2017.1628C19.7305%2017.116%2019.6115%2017.0919%2019.4913%2017.0918ZM15.7413%2017.8418C15.5626%2017.8422%2015.388%2017.8958%2015.2398%2017.9958C15.0917%2018.0958%2014.9766%2018.2376%2014.9094%2018.4032C14.8421%2018.5688%2014.8257%2018.7507%2014.8622%2018.9257C14.8987%2019.1007%2014.9865%2019.2608%2015.1144%2019.3857L19.2394%2023.5107C19.3213%2023.6008%2019.4207%2023.6734%2019.5315%2023.724C19.6423%2023.7745%2019.7622%2023.8021%2019.8839%2023.805C20.0057%2023.8079%2020.1268%2023.786%2020.2398%2023.7408C20.3529%2023.6955%2020.4556%2023.6277%2020.5417%2023.5416C20.6279%2023.4555%2020.6956%2023.3528%2020.7409%2023.2397C20.7862%2023.1267%2020.808%2023.0056%2020.8051%2022.8838C20.8022%2022.7621%2020.7747%2022.6422%2020.7241%2022.5314C20.6735%2022.4206%2020.601%2022.3212%2020.5109%2022.2393L16.3859%2018.1143C16.3021%2018.0281%2016.2019%2017.9596%2016.0912%2017.9128C15.9805%2017.866%2015.8615%2017.8419%2015.7413%2017.8418ZM15.7413%2022.3418C15.5626%2022.3422%2015.388%2022.3958%2015.2398%2022.4958C15.0917%2022.5958%2014.9766%2022.7376%2014.9094%2022.9032C14.8421%2023.0688%2014.8257%2023.2507%2014.8622%2023.4257C14.8987%2023.6007%2014.9865%2023.7608%2015.1144%2023.8857L16.2394%2025.0107C16.3213%2025.1008%2016.4207%2025.1734%2016.5315%2025.224C16.6423%2025.2745%2016.7622%2025.3021%2016.8839%2025.305C17.0057%2025.3079%2017.1268%2025.286%2017.2398%2025.2408C17.3529%2025.1955%2017.4556%2025.1277%2017.5417%2025.0416C17.6279%2024.9555%2017.6956%2024.8528%2017.7409%2024.7397C17.7862%2024.6267%2017.808%2024.5056%2017.8051%2024.3838C17.8022%2024.2621%2017.7747%2024.1422%2017.7241%2024.0314C17.6735%2023.9206%2017.601%2023.8212%2017.5109%2023.7393L16.3859%2022.6143C16.3021%2022.5281%2016.2019%2022.4596%2016.0912%2022.4128C15.9805%2022.366%2015.8615%2022.3419%2015.7413%2022.3418Z'%20fill='white'/%3e%3c/svg%3e",j0=({onClick:r,isActive:n,disabled:s})=>e.jsx(R,{type:"text",icon:e.jsx("img",{src:M0,alt:"VertexColorEdit"}),className:`vertex-color-edit-button ${n?"active":""} ${s?"disabled":""}`,onClick:r,disabled:s,title:"Vertex Color Edit Mode"}),V0="data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M15%204.5C9.20986%204.5%204.49997%209.2099%204.49997%2015C4.49997%2020.7901%209.20986%2025.5%2015%2025.5C20.7901%2025.5%2025.5%2020.7901%2025.5%2015C25.5%209.2099%2020.7901%204.5%2015%204.5ZM15%206C19.9794%206%2024%2010.0206%2024%2015C24%2019.9794%2019.9794%2024%2015%2024C10.0205%2024%205.99997%2019.9794%205.99997%2015C5.99997%2010.0206%2010.0205%206%2015%206Z'%20fill='white'/%3e%3cpath%20d='M13.6933%207.45005C13.6085%207.45459%2013.5242%207.46634%2013.4414%207.48516C10.4365%208.10869%208.08406%2010.4711%207.47654%2013.4793C7.39768%2013.8694%207.477%2014.2748%207.69705%2014.6064C7.91709%2014.9379%208.25983%2015.1685%208.64988%2015.2474C9.03993%2015.3262%209.44537%2015.2469%209.77694%2015.0269C10.1085%2014.8068%2010.3391%2014.4641%2010.4179%2014.074C10.7893%2012.2352%2012.2139%2010.8048%2014.0508%2010.4236C14.4271%2010.3556%2014.7633%2010.1463%2014.9905%209.83866C15.2178%209.53099%2015.3189%209.14816%2015.2733%208.7684C15.2276%208.38865%2015.0387%208.04067%2014.745%207.79561C14.4513%207.55055%2014.0751%207.42697%2013.6933%207.45005Z'%20fill='white'/%3e%3cpath%20d='M21.7441%2012.1436C21.6245%2012.1432%2021.5074%2012.1787%2021.4081%2012.2454C21.3087%2012.312%2021.2316%2012.4069%2021.1866%2012.5178C21.1415%2012.6286%2021.1306%2012.7504%2021.1553%2012.8675C21.18%2012.9846%2021.2392%2013.0916%2021.3252%2013.1748L24.3252%2016.1748C24.381%2016.2306%2024.4472%2016.2748%2024.5201%2016.305C24.593%2016.3352%2024.6711%2016.3508%2024.75%2016.3508C24.8289%2016.3508%2024.907%2016.3352%2024.9799%2016.305C25.0528%2016.2748%2025.119%2016.2306%2025.1748%2016.1748C25.2306%2016.119%2025.2748%2016.0528%2025.305%2015.9799C25.3352%2015.907%2025.3507%2015.8289%2025.3507%2015.75C25.3507%2015.6711%2025.3352%2015.593%2025.305%2015.5201C25.2748%2015.4472%2025.2306%2015.381%2025.1748%2015.3252L22.1748%2012.3252C22.1188%2012.2676%2022.0518%2012.2219%2021.9779%2012.1907C21.9039%2012.1595%2021.8244%2012.1435%2021.7441%2012.1436ZM20.6191%2015.5186C20.4995%2015.5182%2020.3824%2015.5537%2020.2831%2015.6204C20.1837%2015.687%2020.1066%2015.7819%2020.0616%2015.8928C20.0165%2016.0036%2020.0056%2016.1254%2020.0303%2016.2425C20.055%2016.3596%2020.1142%2016.4666%2020.2002%2016.5498L23.2002%2019.5498C23.3128%2019.6625%2023.4656%2019.7258%2023.625%2019.7258C23.7843%2019.7258%2023.9371%2019.6625%2024.0498%2019.5498C24.1624%2019.4371%2024.2257%2019.2843%2024.2257%2019.125C24.2257%2018.9657%2024.1624%2018.8129%2024.0498%2018.7002L21.0498%2015.7002C20.9938%2015.6426%2020.9268%2015.5969%2020.8529%2015.5657C20.7789%2015.5345%2020.6994%2015.5185%2020.6191%2015.5186ZM18.7441%2018.1436C18.6245%2018.1432%2018.5074%2018.1787%2018.4081%2018.2454C18.3087%2018.312%2018.2316%2018.4069%2018.1866%2018.5178C18.1415%2018.6286%2018.1306%2018.7504%2018.1553%2018.8675C18.18%2018.9846%2018.2392%2019.0916%2018.3252%2019.1748L21.3252%2022.1748C21.4378%2022.2875%2021.5906%2022.3508%2021.75%2022.3508C21.9093%2022.3508%2022.0621%2022.2875%2022.1748%2022.1748C22.2874%2022.0621%2022.3507%2021.9093%2022.3507%2021.75C22.3507%2021.5907%2022.2874%2021.4379%2022.1748%2021.3252L19.1748%2018.3252C19.1188%2018.2676%2019.0518%2018.2219%2018.9779%2018.1907C18.9039%2018.1595%2018.8244%2018.1435%2018.7441%2018.1436ZM16.1191%2020.0186C15.9995%2020.0182%2015.8824%2020.0537%2015.7831%2020.1204C15.6837%2020.187%2015.6066%2020.2819%2015.5616%2020.3928C15.5165%2020.5036%2015.5056%2020.6254%2015.5303%2020.7425C15.555%2020.8596%2015.6142%2020.9666%2015.7002%2021.0498L18.7002%2024.0498C18.8128%2024.1625%2018.9656%2024.2258%2019.125%2024.2258C19.2843%2024.2258%2019.4371%2024.1625%2019.5498%2024.0498C19.6624%2023.9371%2019.7257%2023.7843%2019.7257%2023.625C19.7257%2023.4657%2019.6624%2023.3129%2019.5498%2023.2002L16.5498%2020.2002C16.4938%2020.1426%2016.4268%2020.0969%2016.3529%2020.0657C16.2789%2020.0345%2016.1994%2020.0185%2016.1191%2020.0186ZM12.7646%2021.1436C12.6399%2021.1389%2012.5168%2021.1732%2012.4125%2021.2418C12.3082%2021.3104%2012.2279%2021.4099%2012.1827%2021.5262C12.1376%2021.6426%2012.1299%2021.7702%2012.1607%2021.8912C12.1914%2022.0122%2012.2592%2022.1205%2012.3545%2022.2012L15.3545%2024.8262C15.4135%2024.8796%2015.4825%2024.9208%2015.5576%2024.9473C15.6327%2024.9737%2015.7123%2024.985%2015.7918%2024.9804C15.8713%2024.9759%2015.9491%2024.9555%2016.0206%2024.9206C16.0921%2024.8856%2016.156%2024.8368%2016.2085%2024.7769C16.261%2024.7171%2016.301%2024.6473%2016.3263%2024.5718C16.3515%2024.4963%2016.3616%2024.4166%2016.3557%2024.3372C16.3498%2024.2578%2016.3282%2024.1803%2016.2921%2024.1094C16.256%2024.0384%2016.2062%2023.9753%2016.1455%2023.9238L13.1455%2021.2988C13.0408%2021.2038%2012.9059%2021.1488%2012.7646%2021.1436Z'%20fill='white'/%3e%3c/svg%3e",E0=({onClick:r,isActive:n,disabled:s})=>e.jsx(R,{type:"text",icon:e.jsx("img",{src:V0,alt:"Vertex Color Mode"}),className:`vertex-color-button ${n?"active":""} ${s?"disabled":""}`,onClick:r,disabled:s,title:"Vertex Color Mode (Requires Divide)"}),S0=({currentMode:r,onModeChange:n,isVertexColorEnabled:s})=>{const l={display:"flex",overflow:"hidden",borderRadius:"6px"},o={margin:0,padding:0,lineHeight:"normal",borderRight:"0px solid rgba(255, 255, 255, 0)"},u={...o,borderRight:"none"};return e.jsxs("div",{style:l,children:[e.jsx("div",{style:o,children:e.jsx(o2,{title:"线框模式",placement:"bottom",mouseEnterDelay:.5,children:e.jsx(y0,{isActive:r==="wireframe",onClick:()=>n("wireframe")})})}),e.jsx("div",{style:o,children:e.jsx(o2,{title:"白模模式",placement:"bottom",mouseEnterDelay:.5,children:e.jsx(b0,{isActive:r==="solid",onClick:()=>n("solid")})})}),e.jsx("div",{style:o,children:e.jsx(o2,{title:"顶点色编辑模式",placement:"bottom",mouseEnterDelay:.5,children:e.jsx(j0,{isActive:r==="vertexColorEdit",disabled:!s,onClick:()=>s?n("vertexColorEdit"):null})})}),e.jsxs("div",{style:u,children:[" ",e.jsx(o2,{title:"顶点色预览模式",placement:"bottom",mouseEnterDelay:.5,children:e.jsx(E0,{isActive:r==="vertexColor",disabled:!s,onClick:()=>s?n("vertexColor"):null})})]})]})};function H0({geometry:r,renderMode:n,activeHighlightColor:s,setActiveHighlightColor:l,brushSize:o,brushColor:u,brushEnabled:c,isColorPickerMode:y}){const h=t.useRef(),m=t.useRef(),[p,P]=t.useState(0),[M,j]=t.useState(!1);let H,x,L;try{({raycaster:H,camera:x,scene:L}=x2())}catch(a){return console.error("useThree hook error:",a),null}j2((a,i)=>{P(w=>w+i),m.current&&m.current.uniforms&&(m.current.uniforms.iTime.value=p+i,m.current.uniforms.highlightColor.value=s?new $(s):new $(0,0,0))});const g=l2.useMemo(()=>({uniforms:{highlightColor:{value:s?new $(s):new $(0,0,0)},iTime:{value:0},iResolution:{value:new A2(window.innerWidth,window.innerHeight)},edgeColor:{value:new $(1,1,0)}},vertexShader:`
        varying vec4 vColor;
        void main() {
          vColor = color;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `,fragmentShader:`
        uniform vec3 highlightColor;
        uniform float iTime;
        varying vec4 vColor;
        void main() {
          vec3 baseColor = vColor.rgb;
          
          // 计算当前颜色与透明颜色之间的距离
          float colorDist = distance(baseColor, highlightColor);
          
          if (colorDist < 0.1) {
            float t = sin(iTime * 2.0) * 0.5 + 0.5;
            gl_FragColor = vec4(t, t, t, 1.0); // 高亮颜色
          } else {
            // 否则使用原始颜色
            gl_FragColor = vec4(baseColor, 1.0);
          }
        }
      `,vertexColors:!0}),[s]),v=l2.useMemo(()=>{switch(n){case"wireframe":return new b2({wireframe:!0,color:"black"});case"vertexColor":const a=new $2(g,{side:f2});return m.current=a,a;case"vertexColorEdit":return new b2({vertexColors:!0,side:f2});case"solid":default:return new X2({color:"white",roughness:.5,metalness:.1,side:f2})}},[n,g]),f=(a,i)=>{if(!a||!i.attributes.color)return null;const w=i.attributes.color;return[w.getX(a.a),w.getY(a.a),w.getZ(a.a)]},d=a=>{var T;if(a.stopPropagation(),!a.face||!((T=h.current)!=null&&T.geometry))return;const i=f(a.face,h.current.geometry);if(!i)return;const Z=`#${new $(i[0],i[1],i[2]).getHexString().toUpperCase()}`;if(y){const F=new CustomEvent("brushColorChange",{detail:{color:Z}});window.dispatchEvent(F)}else n==="vertexColor"&&!y&&l(Z)},E=a=>{y||!c||n!=="vertexColorEdit"||a.button!==0||a.shiftKey||(a.stopPropagation(),j(!0),C(a))},V=a=>{y||!M||!c||n!=="vertexColorEdit"||a.shiftKey||(a.stopPropagation(),C(a))},D=()=>{j(!1)},C=a=>{if(!h.current||!a.face)return;const i=h.current.geometry,w=i.attributes.position,Z=i.attributes.color;if(!Z){console.error("No color attribute found in geometry");return}const T=a.point.clone();h.current.worldToLocal(T);const F=new $(u),G=w.count,W=o*o;for(let z=0;z<G;z++){const _=new J(w.getX(z),w.getY(z),w.getZ(z));T.distanceToSquared(_)<W&&Z.setXYZ(z,F.r,F.g,F.b)}Z.needsUpdate=!0};try{return e.jsxs("mesh",{ref:h,geometry:r,material:v,onClick:d,onPointerDown:E,onPointerMove:V,onPointerUp:D,onPointerLeave:D,children:[e.jsx("ambientLight",{intensity:.7}),e.jsx("directionalLight",{position:[5,5,5],intensity:.7})]})}catch(a){return console.error("Model render error:",a),null}}const k0=t.forwardRef(({geometry:r,onModelLoad:n,activeHighlightColor:s,setActiveHighlightColor:l,brushSize:o,brushColor:u,brushEnabled:c},y)=>{const[h,m]=t.useState("solid"),p=t.useRef(h),[P,M]=t.useState(!1),[j,H]=t.useState(!1),[x,L]=t.useState({x:0,y:0}),[g,v]=t.useState(.001),f=t.useRef(null),d=t.useRef(null);t.useEffect(()=>{c&&(M(!0),V("vertexColorEdit"),j&&H(!1))},[c,j]);const E=i=>{if(d.current){const w=d.current.getBoundingClientRect();L({x:i.clientX-w.left,y:i.clientY-w.top})}};t.useEffect(()=>{p.current=h},[h]);const V=i=>{m(i),i==="vertexColorEdit"||i==="vertexColor"?M(!0):j&&H(!1)};t.useImperativeHandle(y,()=>({triggerUpload:()=>{var i;(i=f.current)==null||i.click()},enableVertexColorMode:()=>{M(!0),V("vertexColor"),window.dispatchEvent(new CustomEvent("vertexColorModeEnabled"))},disableVertexColorMode:()=>{V("solid"),M(!1)},setColorPickerMode:i=>{if(i)if(p.current==="vertexColor"||p.current==="vertexColorEdit")H(!0);else try{V("vertexColorEdit"),M(!0),H(!0)}catch{window.dispatchEvent(new CustomEvent("colorPickerActivationFailed"));return}else H(!1)},setRenderMode:i=>{V(i)},getCurrentRenderMode:()=>p.current}));const D=i=>{const w=i.target.files[0];w&&(n(w),V("solid"),M(!1),H(!1),setIsDrawing(!1),window.dispatchEvent(new CustomEvent("modelLoaded",{detail:{resetToMove:!0}}))),i.target&&(i.target.value=null)},C=()=>e.jsx("input",{ref:f,type:"file",accept:".obj,.gltf,.glb",style:{display:"none"},onChange:D}),a=o*g;return e.jsxs("div",{ref:d,style:{flex:3,backgroundColor:"#e0e0e0",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",height:"100%",width:"100%"},onMouseMove:E,children:[C(),e.jsx("div",{style:{width:"100%",height:"100%"},children:e.jsxs(Y2,{camera:{position:[0,0,5],fov:60},style:{width:"100%",height:"100%"},children:[e.jsx("axesHelper",{args:[1]}),e.jsx("ambientLight",{intensity:.7}),e.jsx("directionalLight",{position:[5,5,5],intensity:.7}),r&&e.jsx(H0,{geometry:r,renderMode:h,activeHighlightColor:s,setActiveHighlightColor:l,brushSize:a,brushColor:u,brushEnabled:c,isColorPickerMode:j}),e.jsx(v0,{enableDamping:!0})]})}),e.jsx("div",{style:{position:"absolute",top:"10px",right:"10px",padding:"0 8px",borderRadius:"4px",zIndex:2},children:e.jsx(S0,{currentMode:h,onModeChange:V,isVertexColorEnabled:P})}),(c||j)&&e.jsx("div",{style:{position:"absolute",left:`${x.x}px`,top:`${x.y}px`,width:`${o}px`,height:`${o}px`,borderRadius:"50%",border:`2px solid ${j?"#ff0000":u}`,backgroundColor:`${u}40`,transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:10}}),j&&e.jsx("div",{style:{position:"absolute",top:"50px",left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(0,0,0,0.7)",color:"white",padding:"8px 16px",borderRadius:"4px",zIndex:10},children:"点击模型选择颜色"})]})}),B0=t.forwardRef(({panels:r,onPanelsChange:n,filename:s,threeDViewRef:l,activeHighlightColor:o,setActiveHighlightColor:u},c)=>{const[y,h]=t.useState(null),m=t.useRef(null),[p,P]=t.useState(!1),[M,j]=t.useState(0),[H,x]=t.useState(!1),[L,g]=t.useState(0),[v,f]=t.useState(!1),[d,E]=t.useState([]),[V,D]=t.useState("0 0 500 400"),[C,a]=t.useState({x:0,y:0}),[i,w]=t.useState(!1),[Z,T]=t.useState({x:0,y:0}),[F,G]=t.useState(!1);t.useImperativeHandle(c,()=>({exportSVG:()=>{if(!m.current){s2.error("SVG 元素未找到，无法导出");return}try{const b=new XMLSerializer().serializeToString(m.current),I=new Blob([b],{type:"image/svg+xml;charset=utf-8"}),S=URL.createObjectURL(I),k=document.createElement("a");k.href=S;const B=s?`${s.split(".")[0]}_pattern.svg`:"pattern.svg";k.download=B,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(S),s2.success("SVG 导出成功")}catch(b){console.error("导出 SVG 时出错:",b),s2.error("导出 SVG 失败")}},resetGenerateButtonState:()=>{f(!1),E([]),u(null)}}));const W=b=>{u(b)},z=b=>{b.target.closest("g[onClick]")||(w(!0),T({x:b.clientX-C.x,y:b.clientY-C.y}))},_=t.useCallback(b=>{i&&a({x:b.clientX-Z.x,y:b.clientY-Z.y})},[i,Z]),e2=()=>{w(!1)},c2=t.useCallback(b=>{if(!y)return;const I=m.current.getBoundingClientRect(),S=b.clientX-I.left-C.x,k=b.clientY-I.top-C.y,B=r.map(Y=>{if(Y.id!==y.panelId)return Y;const q=Y.vertices.map((A,X)=>X===y.vertexIdx?{x:S,y:k}:A);return{...Y,vertices:q}});n(B)},[y,r,n,C]),a2=()=>{h(null)},V2=()=>{x(!0);let b=-10;const I=setInterval(()=>{var S,k;b+=5,g(b),b>120&&(clearInterval(I),x(!1),g(0),(S=l.current)==null||S.enableVertexColorMode(),(k=l.current)==null||k.setRenderMode("vertexColorEdit"),f(!0))},100)},E2=async()=>{P(!0),G(!1);let b=-10;const I=setInterval(()=>{if(b+=5,j(b),b>120){clearInterval(I),P(!1),j(0);try{const k=`/${s.split(".")[0]}.svg`;console.log("[调试] SVG文件路径:",k),fetch(k).then(B=>{if(console.log("[调试] fetch响应:",B),!B.ok)throw new Error("SVG文件未找到");return B.text()}).then(B=>{var y2;if(console.log("[调试] SVG文件内容长度:",B.length),!B||B.trim().length===0)return;const q=new window.DOMParser().parseFromString(B,"image/svg+xml"),A=Array.from(q.querySelectorAll("path"));if(A.length===0)return;const X=A.map((N,h2)=>{const K=N.getAttribute("d"),O=N.getAttribute("fill")||"none",U=N.getAttribute("stroke")||"#000";return{id:N.id||`svg-${h2}`,path:K,children:[],originalPoints:[],fill:O,stroke:U}});let t2=1/0,r2=1/0,d2=-1/0,u2=-1/0;X.forEach(N=>{const h2=/[ML]\s*(-?\d+(?:\.\d+)?)[, ]+(-?\d+(?:\.\d+)?)/gi;let K;for(;(K=h2.exec(N.path))!==null;){const O=parseFloat(K[1]),U=parseFloat(K[2]);O<t2&&(t2=O),U<r2&&(r2=U),O>d2&&(d2=O),U>u2&&(u2=U)}});const n2=50,v2=d2-t2+2*n2,w2=u2-r2+2*n2;v2>0&&w2>0&&D(`${t2-n2} ${r2-n2} ${v2} ${w2}`),E(X),(y2=l.current)==null||y2.enableVertexColorMode()}).catch(B=>{console.error("[调试] SVG文件读取或解析异常:",B),G(!0)})}catch(S){console.error("[调试] 外层异常:",S)}}},100)},S2=()=>d.map(b=>{const I=b.stroke,S=I===o;return e.jsxs("g",{onClick:()=>W(I),style:{cursor:"pointer"},children:[e.jsx("path",{d:b.path,fill:S?"#B8D6E6":"#FFFFFF",stroke:S?"#C686FF":"#000000",strokeWidth:S?3:2,filter:S?"url(#shadow)":"none"}),b.children.map((k,B)=>{let Y=S?"#1976d2":I,q=S?1.5:1,A="none",X="none";return k.type==="Hole Shape"?(A="#fafafa",Y=S?"#1976d2":I):k.type==="Base Line"?(Y=S?"#1976d2":"#AAA",X="5,5"):k.type==="InnerShape"&&(Y=S?"#1976d2":I),e.jsx("path",{d:k.path,fill:A,stroke:Y,strokeWidth:q,strokeDasharray:X},`${b.id}-child-${B}`)})]},b.id)});return l2.useEffect(()=>{if(i)return window.addEventListener("mousemove",_),window.addEventListener("mouseup",e2),()=>{window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",e2)}},[i,_,e2]),l2.useEffect(()=>{if(y)return window.addEventListener("mousemove",c2),window.addEventListener("mouseup",a2),()=>{window.removeEventListener("mousemove",c2),window.removeEventListener("mouseup",a2)}},[y,c2,a2]),e.jsxs("div",{style:{flex:1,width:"100%",background:"#fff",borderLeft:"1px solid #f0f0f0",padding:"10px",overflowY:"auto",height:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},children:[e.jsx("h4",{style:{margin:0},children:"Pattern Panel Making"}),e.jsxs(i2,{children:[e.jsx(R,{type:"default",onClick:V2,loading:H,children:"Divide"}),e.jsx(R,{type:"primary",onClick:E2,disabled:!v,loading:p,children:"Generate Panel"})]})]}),e.jsx(L2,{spinning:H,percent:L,fullscreen:!0,tip:"Dividing..."}),e.jsx(L2,{spinning:p,percent:M,fullscreen:!0,tip:"Generating Panel..."}),F&&e.jsx("div",{style:{marginBottom:"10px"},children:e.jsx(D2,{message:"Generate Failed",type:"error",showIcon:!0})}),e.jsxs("svg",{ref:m,width:"100%",viewBox:V,preserveAspectRatio:"xMidYMid meet",style:{border:"3px solid #ccc",background:"#fafafa",width:"100%",height:F?"85%":"92%",cursor:i?"grabbing":"grab",userSelect:"none"},onMouseDown:z,children:[e.jsx("defs",{children:e.jsxs("filter",{id:"shadow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"blur"}),e.jsx("feOffset",{dx:"2",dy:"2",result:"offsetBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"offsetBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),e.jsxs("g",{transform:`translate(${C.x}, ${C.y})`,children:[S2()," "]})]})]})}),p2=(r,n,s=window,l=[])=>{const o=t.useRef(n);t.useEffect(()=>{o.current=n},[n]),t.useEffect(()=>{const u=s;if(!(u&&u.addEventListener))return;const c=y=>o.current(y);return u.addEventListener(r,c),()=>{u.removeEventListener(r,c)}},[r,s,...l])},R0=(r,n,s,l)=>{const[o,u]=t.useState(!1),[c,y]=t.useState("#000000"),[h,m]=t.useState(!1),[p,P]=t.useState(10),M=t.useCallback(()=>{var L,g;if(r.current){const v=(g=(L=r.current).getCurrentRenderMode)==null?void 0:g.call(L);u(v==="vertexColor"||v==="vertexColorEdit")}},[r]),j=t.useCallback(()=>{u(!0)},[]);p2("vertexColorModeEnabled",j);const H=t.useCallback(L=>{var g;y(L.detail.color),m(!0),s&&(l(!1),r.current&&r.current.setColorPickerMode(!1)),(g=r.current)!=null&&g.getCurrentRenderMode&&r.current.getCurrentRenderMode()!=="vertexColorEdit"&&r.current.setRenderMode("vertexColorEdit"),n("Region_Brush")},[s,l,r,n]),x=t.useCallback(()=>{s&&l(!1)},[s,l]);return p2("brushColorChange",H,window,[s,l,r,n]),p2("colorPickerActivationFailed",x,window,[s,l]),t.useEffect(()=>{M()},[M]),{isVertexColorModeEnabled:o,brushColor:c,setBrushColor:y,brushEnabled:h,setBrushEnabled:m,brushSize:p,setBrushSize:P,checkVertexColorMode:M}},P0=t.forwardRef(({},r)=>{const[n,s]=t.useState("jacket.glb"),[l,o]=t.useState(null),[u,c]=t.useState(null),y=C=>{if(!C)return;const a=new FileReader;a.onload=i=>{const w=C.name;if(s(w),w.endsWith(".gltf")||w.endsWith(".glb"))new W2().parse(i.target.result,"",T=>{let F=null;T.scene.traverse(G=>{G.isMesh&&!F&&(F=G)}),F&&o(F.geometry)},T=>{});else if(w.endsWith(".obj")){const Z=new N2,T=new TextDecoder().decode(i.target.result),F=Z.parse(T);let G=null;F.traverse(W=>{W.isMesh&&!G&&(G=W)}),G&&o(G.geometry)}},a.readAsArrayBuffer(C)},h=t.useRef(null),m=t.useRef(null),p=()=>{h.current&&h.current.triggerUpload&&h.current.triggerUpload()},P=()=>{var C;(C=m.current)==null||C.exportSVG()},[M,j]=t.useState(!1),H=C=>{var a,i,w;C==="Region_Brush"?(f(!0),L==="#FFFFFF"&&g("#000000"),(a=h.current)==null||a.setRenderMode("vertexColorEdit")):C==="Region_Eraser"?(f(!0),g("#FFFFFF"),(i=h.current)==null||i.setRenderMode("vertexColorEdit")):C==="Move"&&f(!1),C!=="Region_Brush"&&C!=="Region_Eraser"&&M&&(j(!1),(w=h.current)==null||w.setColorPickerMode(!1))},{isVertexColorModeEnabled:x,brushColor:L,setBrushColor:g,brushEnabled:v,setBrushEnabled:f,brushSize:d,setBrushSize:E}=R0(h,H,M,j),V=()=>{var a,i;if(!x||!h.current){s2.warning("请先点击Divide按钮激活顶点色渲染模式");return}v&&f(!1);const C=!M;C&&((i=(a=h.current).getCurrentRenderMode)==null?void 0:i.call(a))!=="vertexColorEdit"&&h.current.setRenderMode("vertexColorEdit"),j(C),h.current.setColorPickerMode(C)},D=()=>{const C="#"+Math.floor(Math.random()*16777215).toString(16);g(C)};return t.useImperativeHandle(r,()=>({triggerExportPatternSVG:P})),t.useEffect(()=>{var C,a;l&&(console.log("New model loaded, disabling vertex color mode and Generate Panel button."),(C=h.current)==null||C.disableVertexColorMode(),(a=m.current)==null||a.resetGenerateButtonState())},[l]),e.jsxs(Q,{style:{height:"calc(100vh - 64px)"},children:[e.jsx(x0,{onClothSelect:p,onExportPatternSVG:P,brushSize:d,setBrushSize:E,brushColor:L,setBrushColor:g,onColorPickerClick:V,onAddNewColor:D,onToolSelect:H,isVertexColorModeEnabled:x}),e.jsx(Q,{style:{height:"calc(100% - 48px)"},children:e.jsxs(C2,{style:{height:"100%"},direction:"horizontal",min:200,max:800,defaultValue:300,children:[e.jsx(C2.Panel,{defaultSize:"60%",min:"20%",max:"70%",style:{background:"#fff"},children:e.jsx(k0,{ref:h,geometry:l,onModelLoad:y,activeHighlightColor:u,setActiveHighlightColor:c,brushSize:d,brushColor:L,brushEnabled:v})}),e.jsx(C2.Panel,{style:{height:"100%"},children:e.jsx(B0,{filename:n,threeDViewRef:h,ref:m,activeHighlightColor:u,setActiveHighlightColor:c})})]})})]})}),Z0="/assets/newHomePageTemp-CRCskJEQ.jpg",F0=()=>e.jsx("div",{children:e.jsx("img",{src:Z0,alt:"Home Page"})}),{Header:I0,Content:D0}=Q,T0=()=>e.jsx("div",{children:"Builder Page Content"}),G0=()=>{const r=t.useRef(null),n=O2(),s=()=>{const l=n.pathname;return l.startsWith("/designer")?["designer"]:l.startsWith("/builder")?["builder"]:["home"]};return e.jsxs(Q,{style:{minHeight:"100vh"},children:[" ",e.jsxs(I0,{style:{position:"sticky",top:0,zIndex:100,display:"flex",alignItems:"center",padding:"0 20px",backgroundColor:"#fff",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",marginRight:"30px"},children:"FashionMaker"}),e.jsx(T2,{theme:"light",mode:"horizontal",selectedKeys:s(),style:{flex:1,minWidth:0,borderBottom:"none"},items:[{key:"home",label:e.jsx(m2,{to:"/",children:"Home"})},{key:"designer",label:e.jsx(m2,{to:"/designer",children:"Designer"})},{key:"builder",label:e.jsx(m2,{to:"/builder",children:"Builder"})}]})]}),e.jsxs(D0,{style:{padding:"0",margin:0,flex:1,display:"flex",flexDirection:"column",overflow:n.pathname==="/"?"auto":"visible",height:n.pathname==="/"?"calc(100vh - 64px)":"auto"},children:[" ",e.jsxs(U2,{children:[e.jsx(g2,{path:"/",element:e.jsx(F0,{})}),e.jsx(g2,{path:"/designer",element:e.jsx(P0,{ref:r})}),e.jsx(g2,{path:"/builder",element:e.jsx(T0,{})})]})]})]})};H2.createRoot(document.getElementById("root")).render(e.jsx(t.StrictMode,{children:e.jsxs(_2,{children:[" ",e.jsx(G0,{})]})}));
